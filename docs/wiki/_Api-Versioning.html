<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-VBQ9J9F5M0"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
  
      gtag('config', 'G-VBQ9J9F5M0');
    </script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>enable endpoint versioning | FastEndpoints </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="enable endpoint versioning | FastEndpoints ">
    <meta name="generator" content="docfx 2.58.4.0">
    <meta name="description" content="A light-weight REST Api framework for ASP.Net 6 that implements REPR (Request-Endpoint-Response) Pattern">
    <link rel="shortcut icon" href="../images/favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    <meta property="docfx:rel" content="../">
    <meta property="docfx:newtab" content="true">
    <meta property="og:title" content="FastEndpoints">
    <meta property="og:site_name" content="FastEndpoints">
    <meta property="og:url" content="https://fast-endpoints.com">
    <meta property="og:description" content="An alternative for building RESTful Web APIs with ASP.Net 6 which encourages CQRS and Vertical Slice Architecture.">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://fast-endpoints.com/images/og-image.png">  
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../images/icon.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="enable-endpoint-versioning">enable endpoint versioning</h1>

<p>specify a <code>Prefix</code> and <code>DefaultVersion</code> for versioning like below. prefix is a string that will be prepended to the version number of an endpoint. default version is used automatically for endpoints that do not specify a version.</p>
<pre><code class="lang-csharp">app.UseFastEndpoints(c =&gt;
{
    c.VersioningOptions = o =&gt;
    {
        o.Prefix = &quot;v&quot;;
        o.DefaultVersion = &quot;1&quot;;
    };
});
</code></pre>
<p>once you enable versioning as above, all of your endpoints will be registered with the default version number automatically prepended to them like so:</p>
<pre><code class="lang-yaml">/v1/sales/order
/v1/sales/order/cancel
/v1/sales/invoice
</code></pre>
<p>you can specify the version of a particular endpoint with the <code>Version()</code> method:</p>
<pre><code class="lang-csharp">public override void Configure()
{
    Get(&quot;sales/order&quot;);
    Version(&quot;2&quot;);
}
</code></pre>
<p>now your endpoints will look like this:</p>
<pre><code class="lang-yaml">/v2/sales/order
/v1/sales/order/cancel
/v1/sales/invoice
</code></pre>
<h3 id="disable-auto-versioning">disable auto versioning</h3>
<p>if you do not want endpoints that do not specify a version to be automatically versioned with the <code>DefaultVersion</code>, simply set the default version to <code>VersioningOptions.Common</code> like so:</p>
<pre><code class="lang-csharp">c.VersioningOptions = o =&gt;
{
    o.Prefix = &quot;v&quot;;
    o.DefaultVersion = VersioningOptions.Common;
};
</code></pre>
<p>doing so will enable endpoints to remain <code>un-versioned</code> or <code>common</code> to all api version groups which comes in handy with versioning in swagger as well as not break any existing clients if you've been developing your project without versioning and decide to enable it.</p>
<h1 id="versioning-in-swagger">versioning in swagger</h1>
<div class="tabGroup" id="tabgroup_bHGHmlrG6S">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_bHGHmlrG6S_nswag" role="tab" aria-controls="tabpanel_bHGHmlrG6S_nswag" data-tab="nswag" tabindex="0" aria-selected="true">NSwag</a>
</li>
<li role="presentation">
<a href="#tabpanel_bHGHmlrG6S_swashbuckle" role="tab" aria-controls="tabpanel_bHGHmlrG6S_swashbuckle" data-tab="swashbuckle" tabindex="-1">Swashbuckle</a>
</li>
</ul>
<section id="tabpanel_bHGHmlrG6S_nswag" role="tabpanel" data-tab="nswag">

<p>you can create multiple swagger documents with separate version groups like below:</p>
<pre><code class="lang-csharp">builder.Services
    .AddNSwag(s =&gt;
    {
        s.DocumentName = &quot;v1&quot;;
        s.Title = &quot;my api&quot;;
        s.Version = &quot;v1.0&quot;;
        s.ApiGroupNames = new[] { &quot;v1&quot; };
    })
    .AddNSwag(s =&gt;
    {
        s.DocumentName = &quot;v2&quot;;
        s.Title = &quot;my api&quot;;
        s.Version = &quot;v2.0&quot;;
        s.ApiGroupNames = new[] { &quot;v2&quot; };
    });
</code></pre>
<p>the above will create two swagger docs/definitions each containing only the endpoints that match the respective api version group. <a href="https://github.com/dj-nitehawk/FastEndpoints/blob/747b35325510bf6059a73c6825a4d5f9ef97540b/Web/Program.cs#L37-L49">see here</a> for a working example. the important bit here is the <code>ApiGroupNames</code> property which takes care of filtering the right set of endpoints for that particular swagger definition. if that property is not set, all endpoints from all version groups will be shown.</p>
<p>if the goal is to get swagger to contain all endpoints of a particular version + all common/un-versioned endpoints, simply do the following:</p>
<pre><code class="lang-csharp">s.ApiGroupNames = new[] { &quot;v2&quot;, VersioningOptions.Common };
</code></pre>
</section>
<section id="tabpanel_bHGHmlrG6S_swashbuckle" role="tabpanel" data-tab="swashbuckle" aria-hidden="true" hidden="hidden">

<p>you can create multiple swagger documents with separate version groups like below:</p>
<pre><code class="lang-csharp">builder.Services.AddSwashbuckle(o =&gt;
{
   o.SwaggerDoc(
       documentName: &quot;v1&quot;,
       info: new()
       {
           Title = &quot;my api&quot;,
           Version = &quot;1.0&quot;
       },
       apiGroupNames: new[] { &quot;v1&quot; });
   o.SwaggerDoc(
       documentName: &quot;v2&quot;,
       info: new()
       {
           Title = &quot;my api&quot;,
           Version = &quot;2.0&quot;
       },
       apiGroupNames: new[] { &quot;v2&quot; });
});

app.UseSwaggerUI(o =&gt;
{
    o.SwaggerEndpoint(&quot;/swagger/v1/swagger.json&quot;, &quot;v1&quot;);
    o.SwaggerEndpoint(&quot;/swagger/v2/swagger.json&quot;, &quot;v2&quot;);
});
</code></pre>
<p>the above will create two swagger docs/definitions each containing only the endpoints that match the respective api version group. the important bit here is the <code>apiGroupNames</code> parameter which takes care of filtering the right set of endpoints for that particular swagger definition. if that argument is not correctly set, either all endpoints from all version groups will be shown or none at all.</p>
<p>if the goal is to get swagger to contain all endpoints of a particular version + all common/un-versioned endpoints, simply do the following:</p>
<pre><code class="lang-csharp">apiGroupNames: new[] { &quot;v2&quot;, VersioningOptions.Common };
</code></pre>
</section>
</div>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            Developed by <a href='https://github.com/dj-nitehawk'>Đĵ ΝιΓΞΗΛψΚ</a> and <a href='https://github.com/dj-nitehawk/FastEndpoints/graphs/contributors'>contributors</a> / Licensed under <a href='https://github.com/dj-nitehawk/FastEndpoints/blob/master/LICENSE'>MIT</a> / Website generated by <a href='https://dotnet.github.io/docfx/'>DocFX</a>
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
